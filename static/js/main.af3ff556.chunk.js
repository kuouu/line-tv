(this["webpackJsonpline-tv"]=this["webpackJsonpline-tv"]||[]).push([[0],{191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){"use strict";n.r(t);var c,r,o=n(1),a=n.n(o),i=n(35),s=n.n(i),u=n(58),l=n(233),j=n(228),b=n(76),d=n(20),p=n(59),x=n(236),f=n(212),h=n(213),O=n(37),g=n(2);function m(){return Object(g.jsxs)(x.b,{w:"200px",p:"20px",color:"white",backgroundColor:"#282c34",spacing:3,children:[Object(g.jsx)(b.b,{to:"/",children:Object(g.jsxs)(f.a,{align:"center",children:[Object(g.jsx)(O.e,{fontSize:"1.5rem"}),Object(g.jsx)(v,{children:"Line MO"})]})}),Object(g.jsx)(y,{to:"./dashboard",children:"Dashboard"}),Object(g.jsx)(y,{to:"./storeinfo",children:"Store Info"}),Object(g.jsx)(y,{to:"./boteditor",children:"Bot Editor"})]})}var v=Object(p.a)(h.a)(c||(c=Object(u.a)(["\n  margin-left: 0.5rem;\n  font-size: 1.5rem;\n  font-weight: bold;\n"]))),y=Object(p.a)(b.b)(r||(r=Object(u.a)(["\n  :hover{\n    color: #61dafb;\n  }\n"])));function w(){return Object(g.jsx)("div",{children:"login"})}var S=n(12),C=n.n(S),_=n(27),k=n(5),E=n(214),T=n(231);function D(e){var t=e.name,n=e.icon,c=e.submit;return Object(g.jsxs)(f.a,{w:"100%",align:"center",justify:"space-between",children:[Object(g.jsxs)(x.a,{spacing:8,children:[Object(g.jsx)(E.a,{size:"xl",name:"ncku",src:n}),Object(g.jsx)(h.a,{fontSize:"4xl",fontWeight:"bold",children:t})]}),Object(g.jsx)(T.a,{colorScheme:"blue",onClick:c,children:"Save"})]})}var H=n(16),z=n(10),R=n(215),N=n(217);function I(e){var t=e.info,n=e.setInfo;console.log(t.category);var c=function(e){n(Object(z.a)(Object(z.a)({},t),{},{category:e}))},r=function(e){if(!(t.category.length>=5)){var n=e.target.value;c([].concat(Object(H.a)(t.category),[n])),e.target.value=""}};return Object(g.jsxs)(f.a,{bgColor:"#fafafc",justify:"space-between",border:"solid 1px #e3e3e3",borderRadius:3,p:3,children:[Object(g.jsxs)(x.b,{spacing:6,w:"48%",children:[Object(g.jsxs)(x.b,{children:[Object(g.jsx)(h.a,{mb:"8px",children:"Business Hours:"}),Object(g.jsxs)(x.a,{maxW:"600px",children:[Object(g.jsx)(R.a,{type:"time",value:t.opening_hours[0],onChange:function(e){return n(Object(z.a)(Object(z.a)({},t),{},{opening_hours:[e.target.value,t.opening_hours[1]]}))}}),Object(g.jsx)(h.a,{children:"~"}),Object(g.jsx)(R.a,{type:"time",value:t.opening_hours[1],onChange:function(e){return n(Object(z.a)(Object(z.a)({},t),{},{opening_hours:[t.opening_hours[0],e.target.value]}))}})]})]}),Object(g.jsxs)(x.b,{children:[Object(g.jsx)(h.a,{children:"Phone Number:"}),Object(g.jsx)(R.a,{maxW:"600px",type:"tel",placeholder:"09XX-XXX-XXX",value:t.phone_num,onChange:function(e){return n(Object(z.a)(Object(z.a)({},t),{},{phone_num:e.target.value}))}})]}),Object(g.jsxs)(x.b,{children:[Object(g.jsx)(h.a,{children:"Location:"}),Object(g.jsx)(R.a,{maxW:"600px",placeholder:"somewhere",value:t.location,onChange:function(e){return n(Object(z.a)(Object(z.a)({},t),{},{location:e.target.value}))}})]})]}),Object(g.jsxs)(x.b,{w:"48%",children:[Object(g.jsxs)(f.a,{w:"100%",justify:"space-between",children:[Object(g.jsx)(h.a,{children:"Tags:"}),Object(g.jsx)(h.a,{children:"".concat(t.category.length,"/5")})]}),Object(g.jsx)(R.a,{onBlur:function(e){""!==e.target.value&&r(e)},onKeyPress:function(e){"Enter"===e.key&&""!==e.target.value&&r(e)}}),Object(g.jsx)(f.a,{wrap:"wrap",children:t.category.length>0&&t.category.map((function(e){return Object(g.jsxs)(N.a,{m:"5px",colorScheme:"cyan",children:[Object(g.jsx)(h.a,{isTruncated:!0,children:e}),Object(g.jsx)(N.b,{onClick:function(){return function(e){var n=t.category.filter((function(t){return t!==e}));c(n)}(e)}})]},e)}))})]})]})}var W=n(218);function X(e){var t=e.description,n=e.setDescription;return Object(g.jsxs)(x.b,{bgColor:"#fafafc",border:"solid 1px #e3e3e3",borderRadius:3,p:3,flexGrow:1,children:[Object(g.jsx)(h.a,{children:"Description:"}),Object(g.jsx)(W.a,{h:"100%",resize:"none",placeholder:"introduce your place...",value:t,onChange:function(e){n(e.target.value)}})]})}var A=n(70),P=n.n(A),F="0153a4ceb5",J=function(){var e=Object(_.a)(C.a.mark((function e(t){var n,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("image",t),e.prev=2,e.next=5,P()({method:"POST",url:"https://api.imgur.com/3/image",data:n,headers:{Authorization:"Client-ID ".concat("eeb0a3a67ea2c64")},mimeType:"multipart/form-data"});case 5:return c=e.sent,e.abrupt("return",c.data.data.link);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(_.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P()({method:"get",url:"http://34.80.76.67:8000/shops/1",headers:{"Content-type":"application/json"}});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(_.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P()({method:"post",url:"http://34.80.76.67:8000/shops",data:t,headers:{"Content-type":"application/json"}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(_.a)(C.a.mark((function e(){var t,n,c=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:F,e.prev=1,e.next=4,P()({method:"GET",url:"http://34.80.76.67:8000/fsm/".concat(t)});case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(_.a)(C.a.mark((function e(t,n){var c,r=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.length>2&&void 0!==r[2]?r[2]:F,e.prev=1,e.next=4,P()({method:"POST",url:"http://34.80.76.67:8000/fsm/node",data:{hwid:c,node_id:t,data:JSON.stringify(n)}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}();function q(){var e=Object(o.useState)(""),t=Object(k.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(""),a=Object(k.a)(r,2),i=a[0],s=a[1],u=Object(o.useState)(""),l=Object(k.a)(u,2),j=l[0],b=l[1],d=Object(o.useState)({opening_hours:["",""],phone_num:"",location:"",category:[]}),p=Object(k.a)(d,2),f=p[0],h=p[1];return Object(o.useEffect)((function(){var e=function(){var e=Object(_.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:t=e.sent,c(t.name),s(t.icon),b(t.description),h({opening_hours:[t.opening_hours.split("~")[0],t.opening_hours.split("~")[1]],phone_num:t.phone_num,location:t.location,category:t.category.split(".")});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(g.jsxs)(x.b,{px:10,py:5,flexGrow:1,spacing:8,children:[Object(g.jsx)(D,{name:n,icon:i,submit:function(){return B({shop_id:1,name:n,location:f.location,category:f.category.join("."),opening_hours:f.opening_hours.join("~"),description:j,phone_num:f.phone_num})}}),Object(g.jsx)(I,{info:f,setInfo:h}),Object(g.jsx)(X,{description:j,setDescription:b})]})}function K(){var e=function(e){var t=e.title,n=e.number;return Object(g.jsxs)(x.b,{minW:"300px",children:[Object(g.jsx)(h.a,{fontSize:"md",color:"rgba(0, 0, 0, 0.45)",children:t}),Object(g.jsx)(h.a,{fontSize:"lg",fontWeight:"semibold",children:n})]})};return Object(g.jsxs)(f.a,{direction:"column",bgColor:"white",border:"solid 1px #e3e3e3",borderRadius:3,children:[Object(g.jsx)(f.a,{bgColor:"#fafafa",p:3,fontWeight:"semibold",children:"Key Number"}),Object(g.jsxs)(f.a,{p:3,children:[Object(g.jsx)(e,{title:"Today's Customer",number:13}),Object(g.jsx)(e,{title:"Customer in last 7 days",number:132}),Object(g.jsx)(e,{title:"Cumulative Customer",number:1782})]}),Object(g.jsxs)(f.a,{p:3,children:[Object(g.jsx)(e,{title:"Today's Reply",number:36}),Object(g.jsx)(e,{title:"Reply in last 7 days",number:448}),Object(g.jsx)(e,{title:"Reply Customer",number:3360})]})]})}var L=n(145);function U(){return Object(g.jsxs)(f.a,{w:"50%",direction:"column",bgColor:"white",border:"solid 1px #e3e3e3",borderRadius:3,children:[Object(g.jsx)(f.a,{bgColor:"#fafafa",p:3,fontWeight:"semibold",children:"Key Number"}),Object(g.jsx)(L.a,{style:{height:"100%"},option:{xAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{data:[150,230,224,218,135,147,260],type:"line"}],tooltip:{trigger:"axis"}}})]})}var V,Q=n(219),Z=n(220),$=[{question:"gender",reply:[{title:"male",num:45},{title:"female",num:66}]},{question:"age",reply:[{title:"10~17",num:33},{title:"18~25",num:78},{title:"26~35",num:65},{title:"36~45",num:45},{title:"46~55",num:35},{title:"56~65",num:74},{title:"66~75",num:23},{title:"76~85",num:12},{title:"86~95",num:3},{title:"96~105",num:1},{title:"106~115",num:0},{title:"116~125",num:0},{title:"126~135",num:0}]}];function ee(){var e=Object(o.useState)(),t=Object(k.a)(e,2),n=t[0],c=t[1];return Object(g.jsxs)(f.a,{w:"45%",direction:"column",bgColor:"white",border:"solid 1px #e3e3e3",borderRadius:3,maxH:"400px",minH:"400px",children:[Object(g.jsxs)(f.a,{bgColor:"#fafafa",p:3,justify:"space-between",children:[Object(g.jsx)(h.a,{fontWeight:"semibold",children:"Reply Statistic"}),Object(g.jsx)(Q.a,{w:"50%",h:"100%",bgColor:"white",placeholder:"Select option",value:n,onChange:function(e){c(e.target.value)},children:$.map((function(e,t){return Object(g.jsx)("option",{value:t,children:e.question},e.question)}))})]}),Object(g.jsx)(Z.b,{m:0,overflow:"scroll",children:n&&$[n].reply.map((function(e){return Object(g.jsx)(te,{children:Object(g.jsxs)(f.a,{h:"100%",px:3,justify:"space-between",align:"center",children:[Object(g.jsx)(h.a,{children:e.title}),Object(g.jsx)(h.a,{children:e.num})]})},e.title)}))})]})}var te=Object(p.a)(Z.a)(V||(V=Object(u.a)(["\n  height: 40px;\n  list-style: none;\n  border-bottom: solid 1px #e3e3e3;\n  :hover{\n    background-color: rgba(0, 112, 188, 0.05);\n  }\n"])));function ne(){return Object(g.jsxs)(f.a,{px:10,py:5,flexGrow:1,direction:"column",justify:"space-between",children:[Object(g.jsx)(K,{}),Object(g.jsxs)(f.a,{mt:5,justify:"space-between",children:[Object(g.jsx)(U,{}),Object(g.jsx)(ee,{})]})]})}var ce=n(21),re=function(e){var t=e.onGlobalSave,n=function(e,t){e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"};return Object(g.jsxs)("aside",{children:[Object(g.jsx)("div",{className:"dndnode input",onDragStart:function(e){return n(e,"input")},draggable:!0,children:"Input Node"}),Object(g.jsx)("div",{className:"dndnode",onDragStart:function(e){return n(e,"node")},draggable:!0,children:"Default Node"}),Object(g.jsx)("div",{className:"dndnode output",onDragStart:function(e){return n(e,"output")},draggable:!0,children:"Output Node"}),Object(g.jsx)(T.a,{onClick:t,children:"Save"})]})},oe=n(149),ae=n(222),ie=n(223),se=n(224),ue=n(225),le=n(230),je=n(77),be=n(232),de=n(237),pe=n(98),xe=n(142),fe=n(99),he=function(e){var t=e.data,n=e.onEdit,c=e.editHandler,r=Object(o.useState)(t.content),a=Object(k.a)(r,2),i=a[0],s=a[1],u=Object(o.useState)(t.buttons),l=Object(k.a)(u,2),j=l[0],b=l[1];return Object(g.jsxs)(x.b,{children:[n?Object(g.jsx)(W.a,{fontSize:"xs",defaultValue:i,bg:"#fff",onChange:function(e){s(e.target.value),c(["content"],[e.target.value])}}):Object(g.jsx)(h.a,{fontSize:"xs",children:i}),t.buttons?t.buttons.map((function(e,t){return Object(g.jsx)(T.a,{colorScheme:"blackAlpha",role:"group",children:n?Object(g.jsx)(R.a,{defaultValue:e.text,bg:"#fff",color:"#000",style:{textAlign:"center",height:"60%",borderRadius:"3px"},onChange:function(e){b((function(n){return n[t]=Object(z.a)(Object(z.a)({},n[t]),{},{text:e.target.value}),console.log(["buttons"],[n]),c(["buttons"],[n]),n}))}}):Object(g.jsx)(h.a,{children:j[t].text})},t)})):Object(g.jsx)(g.Fragment,{}),n&&Object(g.jsx)(f.a,{w:"100%",p:1,justify:"center",children:Object(g.jsx)(O.a,{fontSize:"20px",cursor:"pointer",onClick:function(){b((function(e){var t={text:"new button",edgeTo:""};return c(["buttons"],[[].concat(Object(H.a)(e),[t])]),[].concat(Object(H.a)(e),[t])}))}})})]})},Oe=function(e){var t=e.data,n=e.onEdit,c=e.editHandler,r=Object(o.useState)(t.url),a=Object(k.a)(r,2),i=a[0],s=a[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("img",{src:i,style:{borderRadius:"6px"},alt:""}),Object(g.jsx)("input",{type:"file",style:{display:n?"block":"none"},onChange:function(){var e=Object(_.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t.target.files[0]);case 2:n=e.sent,s(n),c(["url"],[n]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})},ge=n(221),me=n(234);function ve(e){var t=e.data,n=e.onEdit,c=e.editHandler,r=t.content,o=function(){var e="imgupload_".concat(Object(me.a)());return Object(g.jsxs)(f.a,{children:[n&&Object(g.jsx)("input",{style:{width:0,opacity:0},display:"none",type:"file",id:e,onChange:function(){var e=Object(_.a)(C.a.mark((function e(t){var n,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(t.target.files[0]);case 2:n=e.sent,o=[].concat(Object(H.a)(r),[{url:n,buttons:[{text:"text",edgeTo:""}]}]),c(["content"],[o]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(g.jsx)("label",{htmlFor:e,children:Object(g.jsx)(f.a,{minW:"300px",h:"300px",justify:"center",align:"center",bgColor:"rgba(255, 255, 255, 0.5)",borderRadius:"5px",cursor:"pointer",_hover:{backgroundColor:"rgba(255, 255, 255, 1)"},children:Object(g.jsx)(O.a,{fontSize:"40px",cursor:"pointer"})})})]})};return Object(g.jsxs)(x.a,{h:0!==r.length||n?"300px":"0",overflowX:"scroll",spacing:10,children:[r&&r.map((function(e,o){var a="imgupload_".concat(Object(me.a)());return Object(g.jsxs)(x.b,{minW:"300px",h:"100%",justify:"center",align:"center",borderRadius:"5px",position:"relative",overflow:"hidden",bgColor:"rgba(255, 255, 255, 0.5)",_hover:{backgroundColor:"rgba(255, 255, 255, 1)"},children:[n&&Object(g.jsx)("input",{style:{height:0,opacity:0},display:"none",type:"file",id:a,onChange:function(){var e=Object(_.a)(C.a.mark((function e(n){var a,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(n.target.files[0]);case 2:a=e.sent,i=t.content.map((function(e,t){return t===o?a:e.url})),s=r.map((function(e,t){return Object(z.a)(Object(z.a)({},e),{},{url:i[t]})})),c(["content"],[s]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(g.jsx)("label",{htmlFor:a,children:Object(g.jsx)(ge.a,{src:e.url,cursor:n?"pointer":"default"})}),Object(g.jsx)(f.a,{px:5,py:2,position:"absolute",bottom:"20px",borderRadius:"20px",color:"white",bgColor:"rgba(0,0,0,0.5)",h:"40px",children:n?Object(g.jsx)(R.a,{w:"80px",maxH:"100%",textAlign:"center",variant:"flushed",value:e.buttons[0].text,onChange:function(t){var n=[Object(z.a)(Object(z.a)({},e.buttons[0]),{},{text:t.target.value})],o=r.map((function(e){return Object(z.a)(Object(z.a)({},e),{},{buttons:n})}));c(["content"],[o])}}):Object(g.jsx)(h.a,{children:e.buttons[0].text})})]},o)})),n&&Object(g.jsx)(o,{})]})}var ye,we,Se={text:"Send Text",img:"Send Image",carousel:"Image Carousel"},Ce=function(e){var t=e.data,n=e.idx,c=e.onEdit,r=e.onEditSection,o=function(e,t){e.forEach((function(e,c){r(n,e,t[c])}))};switch(t.type){case"text":return Object(g.jsx)(he,{data:t,onEdit:c,editHandler:o});case"img":return Object(g.jsx)(Oe,{data:t,onEdit:c,editHandler:o});case"carousel":return Object(g.jsx)(ve,{data:t,onEdit:c,editHandler:o});default:return null}},_e=["title","type","icon"],ke=function(e){var t=e.title,n=(e.type,e.icon),c=Object(oe.a)(e,_e);return Object(g.jsxs)(ie.a,Object(z.a)(Object(z.a)({_hover:{bg:"var(--chakra-colors-gray-200)"},p:"2px 10px",shadow:"md",borderWidth:"1px",borderRadius:"6px"},c),{},{children:[Object(g.jsx)(je.a,{as:n})," ",Object(g.jsx)(h.a,{display:"inline",fontSize:"sm",children:t})]}))},Ee=function(e){var t=e.data,n=t.id,c=t.onDelete,r=t.stateData,a=t.onSaveState,i=t.onSetPosition,s=(t.type,Object(o.useState)(r?JSON.parse(JSON.stringify(r.sections)):[])),u=Object(k.a)(s,2),l=u[0],j=u[1],b=Object(o.useState)((null===r||void 0===r?void 0:r.title)||""),d=Object(k.a)(b,2),p=d[0],m=d[1],v=Object(o.useState)(-1),y=Object(k.a)(v,2),w=y[0],S=y[1],E=Object(ae.a)(),D=E.isOpen,N=E.onOpen,I=E.onClose,W=function(){var e=Object(_.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(n,Object(z.a)(Object(z.a)({},r),{},{title:p,sections:l}));case 2:a(l,p);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(e,t,n){j((function(c){var r=Array.from(c);return r[e][t]=n,r}))},A=function(e){var t={img:{type:"img",url:""},text:{type:"text",content:"",buttons:[]},carousel:{type:"carousel",content:[]}};console.log(t,e,t[e]);var n=[].concat(Object(H.a)(l),[t[e]]);j(n)};return Object(g.jsxs)("div",{style:Te,children:[Object(g.jsx)(ce.c,{type:"target",position:"left"}),Object(g.jsxs)(x.c,{onClick:N,onMouseUp:function(e){i(e.clientX,e.clientY)},children:[Object(g.jsxs)(f.a,{width:"100%",alignItems:"center",children:[Object(g.jsx)(ie.a,{padding:"0 8px",fontWeight:"bold",color:"#282c34",children:p}),Object(g.jsx)(se.a,{}),Object(g.jsx)(ue.a,{size:"sm",onClick:function(){c(n)}})]}),l.map((function(e,t){return"text"===e.type&&e.buttons?[Object(g.jsx)("hr",{style:{margin:"1px",width:"100%",border:"#000 1px solid"}})].concat(Object(H.a)(e.buttons.map((function(e,n){return Object(g.jsxs)(ie.a,{style:{margin:"3px",width:"100%",position:"relative",textAlign:"center"},children:[e.text,Object(g.jsx)(ce.c,{type:"source",id:"".concat(t,"_").concat(n),position:"right",style:De})]},"".concat(t,"_").concat(n))})))):"carousel"===e.type?[Object(g.jsx)("hr",{style:{margin:"1px",width:"100%",border:"#000 1px solid"}})].concat(Object(H.a)(e.content.map((function(e,n){return Object(g.jsxs)(ie.a,{style:{margin:"3px",width:"100%",position:"relative",textAlign:"center"},children:[e.buttons[0].text,Object(g.jsx)(ce.c,{type:"source",id:"".concat(t,"_").concat(n),position:"right",style:De})]},"".concat(t,"_").concat(n))})))):null}))]}),Object(g.jsxs)(le.a,{isOpen:D,onClose:I,children:[Object(g.jsx)(le.g,{}),Object(g.jsxs)(le.d,{children:[Object(g.jsx)(le.f,{children:Object(g.jsx)(R.a,{placeholder:"Title here",variant:"flushed",maxWidth:"90%",value:p,onChange:function(e){return m(e.target.value)}})}),Object(g.jsx)(le.c,{}),Object(g.jsxs)(le.b,{children:[Object(g.jsx)(fe.a,{onDragEnd:function(e){e.destination&&j((function(t){var n=Array.from(t),c=n.splice(e.source.index,1),r=Object(k.a)(c,1)[0];return n.splice(e.destination.index,0,r),n}))},children:Object(g.jsx)(fe.c,{droppableId:"droppable",children:function(e,t){return Object(g.jsxs)("div",Object(z.a)(Object(z.a)({},e.droppableProps),{},{ref:e.innerRef,children:[l.map((function(e,t,c){return Object(g.jsx)(fe.b,{draggableId:"".concat(n,"_").concat(t),index:t,children:function(n,c){return Object(g.jsx)("div",Object(z.a)(Object(z.a)({ref:n.innerRef},n.draggableProps),{},{children:Object(g.jsxs)(ie.a,{p:"6px 10px",m:"10px 0",_hover:{bg:"#EDF2F7",transition:"0.3s",borderRadius:"6px"},role:"group",children:[Object(g.jsxs)(f.a,{width:"100%",alignItems:"center",justifyContent:"space-between",mb:3,children:[Object(g.jsxs)(f.a,{alignItems:"center",children:[Object(g.jsx)(h.a,Object(z.a)(Object(z.a)({fontSize:"sm"},n.dragHandleProps),{},{children:Object(g.jsx)(je.a,{as:O.d,width:"0px",style:{transition:"0.2s"},_groupHover:{width:"12px"}})})),Object(g.jsx)(h.a,{fontWeight:"bold",fontSize:"sm",children:"#".concat(t+1," ").concat(Se[e.type])})]}),Object(g.jsxs)(f.a,{alignItems:"center",children:[Object(g.jsx)(je.a,{as:O.b,onClick:function(){S((function(e){return e===t?-1:t}))},style:{transition:"0.2s"},opacity:"0",_groupHover:{opacity:"1"}}),Object(g.jsx)(je.a,{as:O.c,onClick:function(){!function(e){j((function(t){var n=Array.from(t);return n.splice(e,1),n}))}(t)},style:{transition:"0.2s"},opacity:"0",_groupHover:{opacity:"1"}})]})]}),Object(g.jsx)(Ce,{data:e,idx:t,onEdit:w===t,onEditSection:X})]},t)}))}},t)})),e.placeholder]}))}})}),Object(g.jsx)("br",{}),Object(g.jsx)(be.a,{allowMultiple:!0,width:"100%",children:Object(g.jsxs)(be.d,{children:[Object(g.jsxs)(be.b,{p:"2px 4px",children:[Object(g.jsx)(ie.a,{flex:"1",textAlign:"left",children:"Add more"}),Object(g.jsx)(be.c,{})]}),Object(g.jsx)(be.e,{pb:4,children:Object(g.jsxs)(de.a,{columns:2,spacing:2,width:"100%",children:[Object(g.jsx)(ke,{title:"Text message",icon:pe.c,onClick:function(){A("text")}}),Object(g.jsx)(ke,{title:"Image message",icon:pe.b,onClick:function(){A("img")}}),Object(g.jsx)(ke,{title:"Carousel message",icon:xe.a,onClick:function(){A("carousel")}}),Object(g.jsx)(ke,{title:"Menu message",icon:pe.a,onClick:function(){A("menu")}})]})})]})})]}),Object(g.jsxs)(le.e,{children:[Object(g.jsx)(T.a,{size:"sm",onClick:W,colorScheme:"blue",mr:3,children:"Save"}),Object(g.jsx)(T.a,{size:"sm",onClick:function(){j(JSON.parse(JSON.stringify((null===r||void 0===r?void 0:r.sections)||[]))),I()},children:"Cancel"})]})]})]})]})},Te={border:"1px #878787 solid",borderRadius:"4px",padding:"8px",backgroundColor:"#fafafa",boxShadow:"3px 5px 18px 0 rgba(0, 112, 188, 0.1), 0 -1px 16px 0 rgba(0, 112, 188, 0.1)"},De={top:"50%",width:"8px",height:"8px",zIndex:100},He=n(227),ze=(n(191),40),Re=function(e){var t=e.id,n=e.sourceX,c=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=e.targetPosition,s=e.style,u=void 0===s?{}:s,l=e.data,j=(e.arrowHeadType,e.markerEndId),b=Object(ce.g)({sourceX:n,sourceY:c,sourcePosition:a,targetX:r,targetY:o,targetPosition:i}),d=Object(ce.j)("arrowclosed",j),p=Object(ce.i)({sourceX:n,sourceY:c,targetX:r,targetY:o}),x=Object(k.a)(p,2),f=x[0],h=x[1];return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("path",{id:t,style:u,className:"react-flow__edge-path",d:b,markerEnd:d}),Object(g.jsx)("foreignObject",{width:ze,height:ze,x:f-20,y:h-20,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:Object(g.jsx)(He.a,{width:"".concat(ze,"px"),height:"".concat(ze,"px"),onClick:function(){l.onDelete(t)},children:Object(g.jsx)(ie.b,{size:"15px",bg:"#eee",className:"edge-button",children:"\xd7"})})})]})},Ne=(n(192),1),Ie=function(){var e=Object(o.useRef)(null),t=Object(o.useState)(null),n=Object(k.a)(t,2),c=n[0],r=n[1],a=Object(o.useState)([]),i=Object(k.a)(a,2),s=i[0],u=i[1],l=Object(o.useState)([]),j=Object(k.a)(l,2),b=j[0],d=j[1];Object(o.useEffect)((function(){var e=function(){var e=Object(_.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,n=t.data.map((function(e){return JSON.parse(e.data.replace('\\"','"'))})),Ne=n.length,d(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var p=function(t,n){var r=e.current.getBoundingClientRect();return c.project({x:t-r.left,y:n-r.top})},x=Object(o.useCallback)((function(e){return u((function(t){var n=t.filter((function(t){return t.id===e}));if("node"===n[0].type){b.splice(b.findIndex((function(t){return t.id===e})),1),d(b);var r=c.getElements().filter((function(e){return Object(ce.k)(e)})),o=Object(ce.h)(n,r);return Object(ce.l)([].concat(Object(H.a)(n),Object(H.a)(o)),t)}if("button"===n[0].type){console.log(n[0]);var a=n[0].sourceHandle.split("_")[0],i=n[0].sourceHandle.split("_")[1],s=b;return b.forEach((function(e,t,c){e.id===n[0].source&&("text"===e.sections[a].type?c[t].sections[a].buttons[i].edgeTo="":"carousel"===e.sections[a].type&&(c[t].sections[a].content[i].buttons[0].edgeTo=""))})),d(s),console.log(b),Object(ce.l)(Object(H.a)(n),t)}}))}),[c,b]);return Object(o.useEffect)((function(){u(b.map((function(e){return Object(z.a)(Object(z.a)({},e),{},{type:"node",data:{id:e.id,type:e.type,stateData:e,onDelete:x,onSaveState:function(t,n){d((function(c){return c.map((function(c){return c.id===e.id&&(c.sections=t,c.title=n),c}))}))},onSetPosition:function(t,n){console.log(t,n),d((function(c){return c.map((function(c){return c.id===e.id&&(c.position=p(t,n)),c}))}))}}})}))),b.forEach((function(e){e.sections&&e.sections.forEach((function(t,n){"text"===t.type&&t.buttons?t.buttons.forEach((function(t,c){if(""!==t.edgeTo){var r={source:e.id,sourceHandle:"".concat(n,"_").concat(c),target:t.edgeTo,targetHandle:null};u((function(e){return Object(ce.e)(Object(z.a)(Object(z.a)({},r),{},{type:"button",data:{onDelete:x}}),e)}))}})):"carousel"===t.type&&t.content.forEach((function(t,c){if(""!==t.buttons[0].edgeTo){var r={source:e.id,sourceHandle:"".concat(n,"_").concat(c),target:t.buttons[0].edgeTo,targetHandle:null};u((function(e){return Object(ce.e)(Object(z.a)(Object(z.a)({},r),{},{type:"button",data:{onDelete:x}}),e)}))}}))}))}))}),[x,b]),Object(g.jsx)("div",{className:"dndflow",children:Object(g.jsxs)(ce.d,{children:[Object(g.jsx)("div",{className:"reactflow-wrapper",ref:e,children:Object(g.jsxs)(ce.f,{elements:s,onConnect:function(e){var t=e.sourceHandle.split("_")[0],n=e.sourceHandle.split("_")[1];u((function(t){return Object(ce.e)(Object(z.a)(Object(z.a)({},e),{},{type:"button",data:{onDelete:x}}),t)}));var c=b;b.forEach((function(c,r,o){c.id===e.source&&("text"===c.sections[t].type?o[r].sections[t].buttons[n].edgeTo=e.target:"carousel"===c.sections[t].type&&(o[r].sections[t].content[n].buttons[0].edgeTo=e.target))})),d(c)},onElementsRemove:function(e){return u((function(t){return Object(ce.l)(e,t)}))},onEdgeUpdate:function(e,t){var n=t.sourceHandle.split("_")[0],c=t.sourceHandle.split("_")[1],r=b;b.forEach((function(e,r,o){e.id===t.source&&("text"===e.sections[n].type?o[r].sections[n].buttons[c].edgeTo=t.target:"carousel"===e.sections[n].type&&(o[r].sections[n].content[c].buttons[0].edgeTo=t.target))})),d(r),u((function(n){return Object(ce.m)(e,t,n)}))},onLoad:function(e){return r(e)},onDrop:function(t){t.preventDefault();var n=e.current.getBoundingClientRect(),r=t.dataTransfer.getData("application/reactflow"),o=c.project({x:t.clientX-n.left,y:t.clientY-n.top}),a="node_".concat(Ne++),i={id:a,type:"node",position:o,data:{id:a,type:r,onDelete:x,stateData:null,onSaveState:function(e){d((function(t){return t.map((function(t){return t.id===a&&(t.sections=e),t}))}))},onSetPosition:function(e,t){d((function(n){return n.map((function(n){return n.id===a&&(n.position=p(e,t)),n}))}))}}};u((function(e){return e.concat(i)})),d((function(e){return e.concat({id:a,type:r,position:o,title:"",sections:[]})}))},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},nodeTypes:{node:Ee},edgeTypes:{button:Re},children:[Object(g.jsx)(ce.b,{}),Object(g.jsx)(ce.a,{variant:"lines",gap:100,size:2})]})}),Object(g.jsx)(re,{onGlobalSave:function(){var e=b.map((function(e){return e.id})),t=b;b.forEach((function(t){t.sections.forEach((function(t){"text"===t.type&&t.buttons?t.buttons.forEach((function(t,n,c){-1===e.indexOf(t.edgeTo)&&(c[n].edgeTo="")})):"carousel"===t.type&&t.content.forEach((function(t,n,c){-1===e.indexOf(t.buttons[0].edgeTo)&&(c[n].edgeTo="")}))}))})),d(t),b.forEach((function(e){M(e.id,e)}))}})]})})};function We(){return Object(g.jsx)("div",{style:{width:"100%",height:"100%"},children:Object(g.jsx)(Ie,{})})}function Xe(){var e=Object(d.g)();return Object(g.jsxs)(f.a,{w:"100%",px:7,py:3,align:"center",bgColor:"white",justify:"space-between",children:[Object(g.jsx)(h.a,{fontWeight:"semibold",fontSize:"2xl",children:{"/dashboard":"Dashboard","/storeinfo":"Store Info","/boteditor":"Bot Editor"}[e.pathname]}),Object(g.jsxs)(x.a,{align:"center",children:[Object(g.jsx)(O.f,{fontSize:"1.5rem"}),Object(g.jsx)(h.a,{children:"\u4eca\u65e5\u5e97\u5167\u4eba\u6578\uff1a"}),Object(g.jsx)(h.a,{children:"13"})]})]})}var Ae=function(){return Object(g.jsxs)(l.a,{children:[Object(g.jsx)(j.a,{}),Object(g.jsx)(b.a,{children:Object(g.jsxs)(Pe,{children:[Object(g.jsx)(m,{}),Object(g.jsxs)(Fe,{children:[Object(g.jsx)(Xe,{}),Object(g.jsxs)(d.d,{children:[Object(g.jsx)(d.a,{exact:!0,from:"/",to:"/dashboard"}),Object(g.jsx)(d.b,{exact:!0,path:"/login",component:w}),Object(g.jsx)(d.b,{exact:!0,path:"/dashboard",component:ne}),Object(g.jsx)(d.b,{exact:!0,path:"/storeinfo",component:q}),Object(g.jsx)(d.b,{exact:!0,path:"/boteditor",component:We})]})]})]})})]})},Pe=p.a.div(ye||(ye=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100vw;\n  min-height: 100vh;\n"]))),Fe=p.a.div(we||(we=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n  flex-grow: 1;\n  background-color: #f6f8fa;\n  width: calc(100vw - 200px);\n  height: 100vh;\n"])));s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(Ae,{})}),document.getElementById("root"))}},[[193,1,2]]]);
//# sourceMappingURL=main.af3ff556.chunk.js.map